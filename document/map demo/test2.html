<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no, width=device-width">
    <title>地址选择</title>
    <link rel="stylesheet" href="http://cache.amap.com/lbs/static/main1119.css"/>
    <script type="text/javascript" src="http://webapi.amap.com/maps?v=1.3&key=f4249b83daaa9e865acf8ea673b1b5dd&plugin=AMap.Autocomplete,AMap.PlaceSearch"></script>
    <script type="text/javascript" src="http://cache.amap.com/lbs/static/addToolbar.js"></script>
</head>
<body>
<div id="container"></div>
<div id="myPageTop">
    省：<select  onchange='cityOn(this)'>
                    <option>请选择</option>
                    <option>江苏</option>
                    <option>浙江</option>
           </select>
    市：<select onchange='cityOn(this)'>
                    <option>请选择</option>
                    <option>无锡</option>
                    <option>南通</option>
           </select>
  详细地址：<input id='tipinput' onKeyUp='cityOn(this)'/>
</div>
<script type="text/javascript">
    //地图加载
    var map = new AMap.Map("container", {
        resizeEnable: true,
         layers: [new AMap.TileLayer.Satellite(),new AMap.TileLayer.RoadNet]
    });
    //输入提示
    var autoOptions = {
        input: "tipinput"
    };
 
    var placeSearch = new AMap.PlaceSearch({
        map: map
    });  //构造地点查询类
  
   map.on('click',function(e){
         map.clearMap();
        new AMap.Marker({
            map: map,
            icon: "http://webapi.amap.com/theme/v1.3/markers/n/mark_r.png",
            position: [e.lnglat.getLng(), e.lnglat.getLat()]
        });
     show(e.lnglat.getLng(),e.lnglat.getLat());
  });
  
   function show(t1,t2){
        console.log('经度：'+t1+',纬度：'+t2);
   }
  function cityOn(obj){
        placeSearch.search(obj.value,function(status,result){
            if(status == 'complete'){
                if(result.poiList.count > 0){
                    show(result.poiList.pois[0].location.lng,result.poiList.pois[0].location.lat);
                }
            }
        }) 
  }
  function selectOn(obj){
        document.getElementById('tipinput').value = obj.value;
  }
</script>
</body>
</html>